## Проект: Telegram-бот для отслеживания цен на товары

### Описание проекта
Telegram-бот отслеживает цены на товары по URL-адресам, отправленным пользователями, уведомляет о снижении цен и предоставляет графики изменения цен. Бот удобен для тех, кто хочет следить за динамикой цен на интересующие товары и получать уведомления о скидках.

### Функционал
1. **Добавление товара**: Пользователь отправляет ссылку на товар, бот начинает его отслеживать.
2. **Удаление товара**: Возможность удаления товара из отслеживаемого списка.
3. **Уведомления**: Бот отправляет уведомления при снижении цены.
4. **Просмотр списка товаров**: Пользователь может увидеть список товаров и их актуальные цены.
5. **Графики изменений**: Бот строит графики динамики цен за всё время отслеживания.
6. **Автоматическое обновление**: Цены проверяются автоматически через заданные промежутки времени.

### Архитектура
1. **Класс `PriceTrackerBot`**:
   - Методы:
     - `start()`: Запуск бота.
     - `add_item(url)`: Добавление товара.
     - `remove_item(item_id)`: Удаление товара.
     - `list_items()`: Список отслеживаемых товаров.
     - `notify_user(item, new_price)`: Уведомление о снижении цены.
     - `show_stats(item_id)`: График изменения цены.
   
2. **Класс `PriceScraper`**:
   - Методы:
     - `get_price(url)`: Основной метод для получения цены товара по URL. Проверяет валидность URL и использует PriceFetcher для загрузки HTML и извлечения цены.
     - `is_valid_url(url)`: Проверяет, соответствует ли URL нужному формату.
3. **Класс `PriceFetcher`**:
    - Методы:
      - `fetch_html(url)`: Загружает HTML-код страницы.
      - `extract_price(html, selector)`: Извлекает цену по CSS-селектору.
      - `_parse_price(price_text)`: Очищает текст цены от лишних символов и преобразует его в число.
      
4. **Класс `DatabaseManager`**:
   - Методы:
     - `add_item(user_id, url, initial_price)`: Добавление товара в БД.
     - `remove_item(item_id)`: Удаление товара.
     - `get_items(user_id)`: Получение списка товаров пользователя.
     - `update_price(item_id, new_price)`: Обновление цены товара.
     - `get_price_history(item_id)`: История цен для построения графиков.

5. **Класс `NotificationManager`**:
   - Методы:
     - `check_prices()`: Проверка новых цен.
     - `send_notifications()`: Отправка уведомлений.

6. **Класс `PlotManager`**:
   - Метод:
     - `generate_price_graph(item_id)`: Создание графика изменения цен.

### Структура проекта
- **main.py**: Основной файл бота.
- **scraper.py**: Логика обработки URL и цены.
- **pricefetcher.py**: Логика загрузки и парсинга HTML.
- **database.py**: Работа с базой данных.
- **scheduler.py**: Планирование обновлений цен.
- **notification.py**: Модуль для отправки уведомлений.
- **plotter.py**: Построение графиков.
- **config.py**: Настройки проекта.
- **requirements.txt**: Зависимости проекта.

### База данных
Используется SQLite. Основные таблицы:
- **items**: Товары (ID, URL, цена, история цен).
- **users**: Пользователи (ID, имя, отслеживаемые товары).

### Пример взаимодействия:
1. Команда `/add [URL]` — добавление товара.
2. Регулярные проверки цен, уведомления о снижении.
3. Команда `/stats [ID]` — график изменения цен.

Проект помогает пользователям удобно отслеживать цены на товары через Telegram-бота и получать уведомления о скидках.